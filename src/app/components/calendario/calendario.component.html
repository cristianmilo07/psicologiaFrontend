  <div class="zona-container">
    <div class="background-decoration">
      <div class="cloud cloud-1"></div>
      <div class="cloud cloud-2"></div>
      <div class="star star-1">⭐</div>
      <div class="star star-2">⭐</div>
    </div>
  
    <header class="section-header">
      <div class="header-left">
        <span class="star-icon">⭐</span>
        <a routerLink="/zona-profesional" class="home-link">← Volver</a>
      </div>
      <div class="header-center">
        <h1 class="section-title">Calendario</h1>
      </div>
      <div class="header-right">
        <div class="dropdown">
          <select class="dropdown-select" (change)="onSelectChange($event)">
            <option value="">{{ user?.name || 'Usuario' }}</option>
            <option value="logout">Cerrar Sesión</option>
          </select>
        </div>
      </div>
    </header>
  
    <main class="main-content">
      <div class="calendar-section">
        <div class="calendar-container">
          <div class="calendar-header">
            <button class="btn-nav" (click)="previousMonth()"><</button>
            <h3>{{ currentDate | date:'MMMM yyyy' }}</h3>
            <button class="btn-nav" (click)="nextMonth()">></button>
          </div>
          <div class="calendar-grid">
            <div class="day-header" *ngFor="let day of ['Dom', 'Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb']">{{ day }}</div>
            <div
              class="day-cell"
              *ngFor="let date of getDaysInMonth()"
              [class.current-month]="isCurrentMonth(date)"
              [class.today]="isToday(date)"
              (click)="selectDate(date)">
              <div class="day-number">{{ date.getDate() }}</div>
              <div class="appointments" *ngIf="getAppointmentsForDate(date).length > 0">
                <div class="appointment-item" *ngFor="let app of getAppointmentsForDate(date)">
                  {{ app.time }} - {{ app.type === 'alumno' ? 'Alumno' : 'Acudiente' }} - {{ app.description }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Modal for adding appointment -->
    <div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <h3>Agendar Cita para {{ selectedDateForModal | date:'dd/MM/yyyy' }}</h3>
        <div class="existing-appointments" *ngIf="selectedDateForModal && getAppointmentsForDate(selectedDateForModal).length > 0">
          <h4>Citas Existentes:</h4>
          <ul>
            <li *ngFor="let app of getAppointmentsForDate(selectedDateForModal)">
              {{ app.time }} - {{ app.type === 'alumno' ? 'Alumno' : 'Acudiente' }} - {{ app.description }}
            </li>
          </ul>
        </div>
        <form (ngSubmit)="saveAppointment()">
          <div class="form-group">
            <label for="type">Tipo:</label>
            <select id="type" [(ngModel)]="newAppointment.type" name="type" required>
              <option value="alumno">Alumno</option>
              <option value="acudiente">Acudiente</option>
            </select>
          </div>
          <div class="form-group">
            <label for="time">Hora:</label>
            <input type="time" id="time" [(ngModel)]="newAppointment.time" name="time" required>
          </div>
          <div class="form-group">
            <label for="description">Descripción:</label>
            <input type="text" id="description" [(ngModel)]="newAppointment.description" name="description" required>
          </div>
          <div class="modal-buttons">
            <button type="submit" class="btn-save">Guardar</button>
            <button type="button" class="btn-cancel" (click)="closeModal()">Cancelar</button>
          </div>
        </form>
      </div>
    </div>
  </div>